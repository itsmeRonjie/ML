<style>
    body {
    padding: 0;
    margin: 0;
    box-sizing: border-box;
    width: auto;
    height: auto;
    position: relative;
    font-family: monospace;

}

.iframe {
    height: 100vh;
}

.iframe iframe {
    height: 100%;
    width: 100%;
}

.form {
    background: #073358;
    padding: 40px 10px 10px 10px;
    width: fit-content;
    opacity: 1;
    display: block;
    box-sizing: border-box;
    position: relative;
    border: 2px solid #4372D6;
}

.form * {
    display: block;
    width: 200px;
    margin: 5px;
    box-sizing: border-box;
    text-align: center;
}

button {
    padding: 5px;
    color: white;
    border-radius: 2px;
    cursor: pointer;
    font-size: .8em;
    border: 2px solid;
    font-family: Verdana, Geneva, Tahoma, sans-serif;
}

input[type="text"] {
    background: #00203D;
    border: 1px solid #FE961C;
    padding: 10px 5px;
    color: white;
    outline: none;
    border-radius: 5px;
}

#loginAmazon {
    background: #FE961C;
    border-color: #FAEB6F;
    transition: 0.2s ease-in-out all;
}

#loginAmazon:hover {
    background: #FAEB6F;
    border-color: #FE961C;
    color: #00203D;
}

#communicateButton {
    background: #264FA5;
    border-color: #4372D6;
    transition: 0.2s ease-in-out all;

}

#communicateButton:hover {
    background: #4372D6;
    border-color: #264FA5;
    color: #00203D;
}

.amazon-status {
    width: fit-content;
    box-sizing: border-box;
    top: 5px;
    left: 5px;
    position: absolute;

}

.amazon-status * {
    box-sizing: border-box;
    display: inline-block;
    margin: 0;
    padding: 0;
}

#amazonStatusIcon {
    width: 20px;
}

#amazonLoginStatus {
    width: fit-content;
    font-size: .5em;
    color: #16B1E5;
    text-align: center;
}

table th {
    margin: 0;
    padding: 0;
    font-size: .5em;
    color: white;
}

table {
    border-collapse: collapse;
    border: 1px solid black;
    box-sizing: border-box;

}

table * {
    padding: 0;
    margin: 0;
    width: fit-content;
}

#apistatus {
    margin-top: 10px;
    width: fit-content;
    color: rgb(150, 144, 144);
    font-size: .7em;
}

#apistatusresp {
    color: greenyellow;
    width: 100%;
    font-size: .8em;
    text-align: right;
}

.header-title {
    font-family: Verdana, Geneva, Tahoma, sans-serif;
    text-align: center;
    font-size: 20px;
    position: relative;
    color: greenyellow;
}

</style>

</head>

<body>
    <div class="form">
        <div class="amazon-status">
            <h2 class="header-title">Boosting VC Sender</h2>'
        </div><input type="text" name="" id="userserver" onchange="checkFormat()" placeholder="UserID ServerID"><button id="communicateButton" onclick="sendVc(this)">Send Verification Code</button>
        <p id="apistatus">API Response</p>
        <p id="apistatusresp">No Response from API </p>
    </div>
    <script>
    let dataUid;
let dataSid;
let colors={
    "error":"#e74c3c",
    "success":"#2ecc71",
    "progress":"#3498db",
    "unknown":"#f1c40f"
}


function checkFormat(){
    var uid = document.getElementById("userserver").value;
    var match = uid.match(/\d+ +\d+/);
    if(match!=null){
        if(match.length>0){
            let split = match[0].split(' ');
            let countSplit = split.length;
            let sid = split[countSplit-1];
            let uid = split[0];
            dataUid = uid;
            dataSid = sid;
            document.getElementById("userserver").value=uid + " " + sid;
        }
    }
}

function apiStatusChange(color,responseText){
    document.querySelector("#apistatusresp").innerText = responseText;
    document.querySelector("#apistatusresp").style.color=color;
}

function sendVc(btn){
    apiStatusChange(colors.progress,"Sending VC...");
    btn.style.display="none";
    sendApi(btn,"sendvc",{
        "roleId":dataUid,
        "zoneId":dataSid
    })
}
async function sendApi(btn,sendas,data){
    let postReq;
    let formData = new FormData();
    for(let d in data){
        formData.append(d,data[d]);
    }
    switch(sendas){
        case "sendvc":
            postReq = await axios.post('https://api.mobilelegends.com/base/sendVc', formData);
            btn.style.display="block"; 
            console.log(postReq.data);
            
            let resp = "No response!";
            let color = colors.progress;
            switch(postReq.data.code){
                case 0:
                    resp = "Sent successfully!";
                    color = colors.success;
                    break;
                case -20006:
                    resp = "VC Sent too fast!"
                    color = colors.error;
                    break;
                case -20012:
                    resp = "Illegal District Service/Invalid Server"
                    color = colors.unknown;
                    break;
            }
            apiStatusChange(color,resp);
        break;
    }
    
}
    </script>
</body>

</html>

